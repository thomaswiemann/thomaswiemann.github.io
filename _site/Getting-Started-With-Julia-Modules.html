<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="Personal Website">
    <meta name="author" content="Thomas Wiemann">
    <link rel="icon" type="image/vnd.microsoft.icon" href="/assets/images/favicon.ico">

    <title>Getting Started with Julia Modules</title>

    <!-- Bootstrap core CSS -->
    <!-- <link href="/assets/css/bootstrap.min.css" rel="stylesheet"> -->

    <link rel="stylesheet" type="text/css" href="/assets/css/my-bootstrap.css" >
    <link rel="stylesheet" type="text/css" href="/assets/css/styles.css">

    <!-- MathJax -->
    
    <script src="/assets/js/load-mathjax.js" async></script>
    

    <!-- Matomo -->
    <script>
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://thomaswiemann.matomo.cloud/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '1']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='//cdn.matomo.cloud/thomaswiemann.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->

  </head>
  <body>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Thomas Wiemann</a>
      </div>
      <div id="navbar" class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          
          
          

  
    
      <li><a href="/">Home</a></li>
    
  

  
    
      <li><a href="/research">Research</a></li>
    
  

  
    
      <li><a href="/Computing">Computing</a></li>
    
  

  
    
      <li><a href="/teaching">Teaching</a></li>
    
  




          <li><a href="/assets/cv/wiemann_CV_2021_11_06.pdf">CV</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="main">
        <h1 id="getting-started-with-julia-modules">Getting Started with Julia Modules</h1>

<p>Modules in Julia allow you to collect sets of objects, methods, and functions. The benefit is that modules can easily be loaded and shared, which makes the research workflow a lot more efficient, especially if code is relevant for multiple projects.</p>

<p>This post is a tutorial on how to create a personal Julia module. As an illustration, I use my applied econometrics module <code class="language-plaintext highlighter-rouge">MyMethods.jl</code>. You can find the most recent version of the package on <a href="https://www.github.com/thomaswiemann/MyMethods.jl">github.com/thomaswiemann/MyMethods.jl</a>.</p>

<p>Three key aspects will be covered:</p>
<ol>
  <li>Creating a blank module</li>
  <li>Setting up Git and GitHub</li>
  <li>Developing features for module</li>
</ol>

<p>Before you get started, make sure you’ve completed the preliminaries:
1) <a href="https://julialang.org/downloads/">Julia</a> is installed together with your favorite IDE (e.g., <a href="https://atom.io/">Atom</a>); 2) <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a> is installed and configured; 3) You have a <a href="https://github.com/">GitHub</a> account.</p>

<h2 id="1-creating-a-blank-module">1. Creating a blank module</h2>

<p>In theory, we could create all the files of our module from scratch, but starting at zero is a pain. Luckily, <code class="language-plaintext highlighter-rouge">PkgTemplates.jl</code> provides the kick start we need: the basic structure of our Julia module to which we can then add the interesting bits.</p>

<p>Open your favorite IDE and make sure that <code class="language-plaintext highlighter-rouge">PkgTemplates.jl</code> is installed. (If not: <code class="language-plaintext highlighter-rouge">using Pkg; Pkg.add("PkgTemplates")</code>). For my module, I then simply ran the following bits of code:</p>
<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">using</span> <span class="n">PkgTemplates</span>

<span class="c"># Create a template</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Template</span><span class="x">(</span><span class="n">user</span> <span class="o">=</span> <span class="s">"thomaswiemann"</span><span class="x">,</span>
             <span class="n">authors</span> <span class="o">=</span> <span class="s">"Thomas Wiemann &lt;wiemann@uchicago.edu&gt;"</span><span class="x">,</span>
             <span class="n">dir</span> <span class="o">=</span> <span class="s">"/home/thomas/GitHub"</span><span class="x">,</span>
             <span class="n">julia</span> <span class="o">=</span> <span class="n">v</span><span class="s">"1.4"</span><span class="x">,</span>
             <span class="n">plugins</span> <span class="o">=</span> <span class="x">[</span>
                 <span class="n">License</span><span class="x">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">"MIT"</span><span class="x">),</span>
                 <span class="o">!</span><span class="n">Git</span><span class="x">,</span>
                 <span class="o">!</span><span class="n">CompatHelper</span><span class="x">,</span>
                 <span class="o">!</span><span class="n">TagBot</span>
             <span class="x">])</span>

<span class="c"># Create the package</span>
<span class="n">t</span><span class="x">(</span><span class="s">"MyMethods"</span><span class="x">)</span>
</code></pre></div></div>

<p>The function <code class="language-plaintext highlighter-rouge">Template()</code> allows us to specify a handful of options for the module. I typically surpress Git here and instead configure it manually (see the next section). Make sure to edit the name, email and working directory of your module before running the code yourself.</p>

<p>Once you’ve initialized the package, navigate to the module folder. In my case this is <code class="language-plaintext highlighter-rouge">/homas/thomas/GitHub/MyMethods</code>. You should see a few files and two folders there, lets go over each:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">Project.toml</code> contains package info such as dependencies and authors.</li>
  <li><code class="language-plaintext highlighter-rouge">Manifest.toml</code> is a machine generated file – best to leave it be.</li>
  <li><code class="language-plaintext highlighter-rouge">README.md</code>, like any other readme file, can contain useful descriptions or comments on your package.</li>
  <li><code class="language-plaintext highlighter-rouge">LICENSE</code> specifies how others may use and share your code.</li>
  <li>The <code class="language-plaintext highlighter-rouge">src</code> folder contains the content (or: source code) of your package. At the moment, it contains a single <code class="language-plaintext highlighter-rouge">.jl</code> file with your project name.</li>
  <li>The test folder contains a single file <code class="language-plaintext highlighter-rouge">runtests.jl</code>, which we will use later to ensure our module is working as intended.</li>
</ul>

<p>Notice that there is no a version control file in the project folder. This will change in the next section.</p>

<h2 id="2-setting-up-git-and-github">2. Setting up Git and GitHub</h2>

<p>Git and GitHub are excellent utilities for keeping track of your project and sharing it with others. This section illustrates how your newly created (still empty) module can be hosted on GitHub.</p>

<p>To get started, we need a GitHub repository. Once you’re logged in, you can create one on <a href="https://github.com">GitHub.com</a>. Make sure to give the repository the same name as your module <em>but</em> append a <code class="language-plaintext highlighter-rouge">.jl</code> at the end. Do not create a license or README file.</p>

<p><img src="/assets/blog/2021-09-29-Getting-Started-With-Julia-Modules/github.png" alt="drawing" width="500" class="center" /></p>

<p>Once the repository is created, we will need to initialize Git in the local module directory and sync it with the GitHub repository. This is easily done with the terminal. Simply open a terminal and navigate to the folder where your module is stored (in my case, this is <code class="language-plaintext highlighter-rouge">/homas/thomas/GitHub/MyMethods</code>). Then execute the following commands:</p>
<pre><code class="language-Git">git init # this initializes git for the module
git add . # this adds all current files
git commit -m “initial commit” # our first commit
git branch -M main
git remote add origin git@github.com:thomaswiemann/MyMethods.jl.git
git push -u origin main # this uploads the code to GitHub
</code></pre>

<p>You should now be able to see your module on GitHub. But of course it’s still empty and of little use in it’s current form. We’ll change this in the next section.</p>

<h2 id="3-develop-your-package">3. Develop your Package</h2>

<p>To give an example of how you can add to your code, we will now create a least squares object with a set of corresponding methods.</p>

<p>To start development, it’s useful to set julia into development mode. For this, install the Revise.jl package. This will continuously update the module without having to restart the julia kernel each time you update a function. This is extremely useful for debugging purposes.</p>

<p>After we have installed Revise.jl, open a julia REPL, enter the package mode by running <code class="language-plaintext highlighter-rouge">]</code> and then execute the command <code class="language-plaintext highlighter-rouge">dev .</code></p>

<p>Still in the package mode, enter <code class="language-plaintext highlighter-rouge">activate .</code> The terminal should now start with <code class="language-plaintext highlighter-rouge">(MyMethods) pkg&gt;</code>rather than specify the version number of julia! Leave the Julia REPL running. We’ll need it for adding dependencies.</p>

<p>Now, open your favorite IDE and select the MyMethods project folder. I like to keep my content seperate from the MyMethods.jl file, so I create an additional folder in the src directory called FUN (short for functions).</p>

<p>Let’s now start with the least squares implementation. For this, I create a new file called myLS.jl, stored inside the FUN folder.</p>

<p>The file contains two main parts. First, I define an object (in julia: <code class="language-plaintext highlighter-rouge">struct</code>) that takes a vector <code class="language-plaintext highlighter-rouge">y</code> of outcomes and a matrix <code class="language-plaintext highlighter-rouge">X</code> of features and calculates the least squared coefficient. The coefficient, together with the inputs, are combined into a new object of type <code class="language-plaintext highlighter-rouge">myLS</code>. Second, I create set of methods that can be called on an object of type <code class="language-plaintext highlighter-rouge">myLS</code>. This includes a method called <code class="language-plaintext highlighter-rouge">inference</code> which calculates (heteroskedasticity robust) standard errors.</p>

<p>You can download the file here for the details:</p>

<p>As one expects, calculation of the least squares coefficient required some linear algebra functions. A good collection is contained in the package <code class="language-plaintext highlighter-rouge">LinearAlgebra.jl</code> that we need to add to our package dependencies. To do so, open your julia REPL and simply type <code class="language-plaintext highlighter-rouge">add LinearAlgebra</code>. Since your in development mode, this will amend your project.toml and manifest.toml files with the necessary infos.</p>

<p>To include the newly defined object in our project, we need to edit the MyMethods.jl file in the src folder.</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="n">MyMethods</span>

<span class="k">using</span> <span class="n">LinearAlgebra</span><span class="x">,</span> <span class="n">Distributions</span><span class="x">,</span> <span class="n">Random</span><span class="x">,</span> <span class="n">DataFrames</span>

<span class="k">export</span> <span class="n">myLS</span>
<span class="k">export</span> <span class="n">coef</span><span class="x">,</span> <span class="n">predict</span><span class="x">,</span> <span class="n">inference</span>

<span class="n">include</span><span class="x">(</span><span class="s">"FUN/myLS.jl"</span><span class="x">)</span>

<span class="k">end</span>
</code></pre></div></div>

<p>Ok this should be good!</p>

<p>To test the functions, I recomed writing a little test in the runtest.jl file in
the test folder.</p>

<p>You are going to test your function in any case. Then why not make that test
reproducable? It’s 0 added effort! You can download my test file here: .</p>

<p>Once you’ve written your test, you can run it in the Julia REPL. If your projects
is already active, simply writing <code class="language-plaintext highlighter-rouge">test</code> suffices. If you’re as lucky as me,
good news awaits! Otherwise, revise your implementation and retry your test.</p>

<p>Once all your tests are successful, your newly created functions are ready for
use. I reccomend comitting your changes in git and uploading the new version of
your package to GitHub.</p>

<p>You can do this easily via the terminal. Once navigated to the MyMethods folder,
run the following commands:</p>
<pre><code class="language-git">git status # this shows you which files you have edited
git add . # this adds all files to the new commit
git commit -m "adds myLS.jl" # commit your changes
git push # this uploads your code to GitHub
</code></pre>

<p><a href="/assets/blog/2021-09-29-Getting-Started-With-Julia-Modules/myLS.jl">myLS.jl</a></p>

<p><a href="/assets/blog/2021-09-29-Getting-Started-With-Julia-Modules/runtests.jl">runtests.jl</a></p>

<p><img src="/assets/blog/2021-09-29-Getting-Started-With-Julia-Modules/atom.png" alt="drawing" width="300" /></p>

<p><img src="/assets/blog/2021-09-29-Getting-Started-With-Julia-Modules/terminal1.png" alt="drawing" width="300" />
<img src="/assets/blog/2021-09-29-Getting-Started-With-Julia-Modules/terminal2.png" alt="drawing" width="300" /></p>

<p>Last but not least, there should be some nice options for displaying math in-text – like $\beta$ – as well as via proper equations:
\begin{equation}
\beta \sim \mathcal{N}(0,1)
\end{equation}</p>

\[\beta\]

  </div>

  <hr>
  <ul class="flex-footer">
  <li class="flex-footer-item" style="text-align: left; width: 160px">
    <p><img src="/assets/images/GitHub-Mark-32px.png" alt="GitHub Icon" style="width:20px"> <a href="https://github.com/thomaswiemann">@thomaswiemann</a> </p>
    <p><img src="/assets/images/2021 Twitter logo - blue.png" alt="Twitter Icon" style="width:20px"> <a href="https://twitter.com/econwiemann">@econwiemann</a> </p>
    <p><img src="/assets/images/LI-In-Bug.png" alt="LinkedIn Icon" style="width:20px"> <a href="https://www.linkedin.com/in/thomas-wiemann">@thomaswiemann</a> </p>
  </li>
  <li class="flex-footer-item" style="width: 500px"><img src="/assets/images/uchicago-logo.jpg" alt="University of Chicago Seal" style="width:350px"></li>
  <li class="flex-footer-item">
    <p>Written in <a href="https://atom.io/">Atom</a>. Built with <a href="https://jekyllrb.com/">Jekyll</a>. Hosted on <a href="https://github.com/thomaswiemann/thomaswiemann.github.io">GitHub</a>.</p>
    <p>&copy; 2021 Thomas Wiemann</p>
  </li>
  </ul>

  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha384-nvAa0+6Qg9clwYCGGPpDQLVpLNn0fRaROjHqs13t4Ggj3Ez50XnGQqc/r8MhnRDZ" crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="/assets/js/jquery.min.js"><\/script>')</script>
  <script src="/assets/js/bootstrap.min.js"></script>
  </body>
</html>
